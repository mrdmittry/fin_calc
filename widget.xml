<div class="container"><div><h3>Time Value of Money</h3><div><input type="radio" id="ann-ord" name="annuity-type" value="ann-ord" checked><label for="ann-ord">Ordinary annuity</label><br><input type="radio" id="ann-due" name="annuity-type" value="ann-due" disabled><label for="ann-due">Annuity due</label><br></div><br><div class="tvm"><table><tr><td><input id="n" name="n"><br></td><td><input id="iy" name="iy"><br></td><td><input id="pv" name="pv"><br></td><td><input id="pmt" name="pmt"><br></td><td><input id="fv" name="fv"><br></td></tr><tr><td><input type="button" onclick="on_n()" value="N"></td><td><input type="button" onclick="on_iy()" value="I/Y"></td><td><input type="button" onclick="on_pv()" value="PV"></td><td><input type="button" onclick="on_pmt()" value="PMT"></td><td><input type="button" onclick="on_fv()" value="FV"></td></tr></table><img class="tvm_formula" src="https://miro.medium.com/max/640/1*N4v1tXhjnMvUT1-iEdpJCQ.png" alt="TVM Formula"></div><br><div class="eff"><h3>Effective Annual Rate</h3><table><tr><td><input id="eff" name="eff"><br></td><td><input id="cy" name="cy"><br></td><td><input id="nom" name="nom"><br></td></tr><tr><td><input type="button" onclick="on_eff()" value="EFF"></td><td><input type="button" id="btn_cy" onclick="on_cy()" value="C/Y" disabled></td><td><input type="button" onclick="on_nom()" value="NOM"></td></tr></table><img src="https://cdn.corporatefinanceinstitute.com/assets/effective-annual-rate.png" alt="EAR Formula"></div></div><div><br><h3>Known issues:</h3><ul class="issues-list"><li>Only ordinary annuity works for now. Annuity due will come soon.</li><li>Doesn't solve for interest rate when both PMT and PV or FV are not zero.</li><li>Solving for N with all PV, FV and PMT of different signs are unstable (WIP).</li><li>Precision is set to 2 decimals. Thus zero can sometimes show up as negative.</li><li>Doesn't look good on mobile phone screens.</li></ul></div><div><br><h3>Source code</h3><ul class="issues-list"><li>The source code is available on <a href="https://github.com/mrdmittry/fin_calc" target="_blank">GitHub</a>.</li><li>Feel free to download the .ZIP file and run as a standalone verion.</li></ul><a href="https://github.com/mrdmittry/fin_calc" target="_blank"><img class="github" src="https://www.cloudsavvyit.com/thumbcache/0/0/85f60b663104f044ba4840ed62faeefe/p/uploads/2019/10/ba9a7cbd.png" alt="GitHub"></a></div></div>
<script type="text/javascript">var ln=Math.log,abs=Math.abs,pow=Math.pow,i_err="Error";function calc_present_value(n,r,a,o){var t=0;return 0!=n&&(t=n/pow(1+a,o)),0!=r&&(t+=r*(1-pow(1+a,-o))/a),-t}function calc_future_value(n,r,a,o){var t=0;return 0!=n&&(t=n*pow(1+a,o)),0!=r&&(t+=r*((pow(1+a,o)-1)/a)),-t}function calc_interest(n,r,a,o){var t=0;return 0==a?(r=abs(r),n=abs(n),t=pow(r/n,1/o)-1):t=i_err,t}function calc_periods(n,r,a,o){var t=0;return 0==a?t=ln(-r/n)/ln(1+o):(a=-a,0!=n&&0==r?t=-ln(1-n*o/a)/ln(1+o):0==n&&0!=r?t=ln(1+r*o/a)/ln(1+o):(n=abs(n),r=abs(r),a=abs(a),t=(ln(r+a/o)-ln(n+a/o))/ln(1+o))),t}function calc_payment(n,r,a,o){var t=0;return 0!=n&&(t=n*a/(1-pow(1+a,-o))),0!=r&&(t+=r*a/(pow(1+a,o)-1)),-t}function calc_eff(n,r){return pow(1+r/n,n)-1}function calc_nom(n,r){return(pow(n+1,1/r)-1)*r}</script>
<script type="text/javascript" defer>var n,iy,pv,fv,pmt,eff,cy,nom,el_n,el_iy,el_pv,el_fv,el_pmt,el_eff,el_cy,el_nom,decimal=2;function onLoad(){n=iy=pv=fv=pmt=0,el_n=document.getElementById("n"),el_iy=document.getElementById("iy"),el_pv=document.getElementById("pv"),el_fv=document.getElementById("fv"),el_pmt=document.getElementById("pmt"),el_eff=document.getElementById("eff"),el_cy=document.getElementById("cy"),el_nom=document.getElementById("nom"),el_n.value=0,el_iy.value=0,el_pv.value=0,el_fv.value=0,el_pmt.value=0,el_eff.value=0,el_cy.value=1,el_nom.value=0}function get_values(){n=parseFloat(el_n.value)||0,iy=parseFloat(el_iy.value)/100||0,pv=parseFloat(el_pv.value)||0,fv=parseFloat(el_fv.value)||0,pmt=parseFloat(el_pmt.value)||0,eff=parseFloat(el_eff.value)||0,cy=parseFloat(el_cy.value)||1,nom=parseFloat(el_nom.value)||0}function fixed_decimal(e){return e.toFixed(decimal)}function on_n(){get_values(),n=calc_periods(pv,fv,pmt,iy),el_n.value=fixed_decimal(n)}function on_iy(){get_values(),(iy=calc_interest(pv,fv,pmt,n))!=i_err&&(iy=fixed_decimal(100*iy)),el_iy.value=iy}function on_pv(){get_values(),pv=calc_present_value(fv,pmt,iy,n),el_pv.value=fixed_decimal(pv)}function on_pmt(){get_values(),pmt=calc_payment(pv,fv,iy,n),el_pmt.value=fixed_decimal(pmt)}function on_fv(){get_values(),fv=calc_future_value(pv,pmt,iy,n),el_fv.value=fixed_decimal(fv)}function on_eff(){get_values(),eff=100*calc_eff(cy,nom/100),el_eff.value=fixed_decimal(eff)}function on_nom(){get_values(),nom=100*calc_nom(eff/100,cy),el_nom.value=fixed_decimal(nom)}onLoad();</script>
<style>.container{font-family:arial;line-height:1.5em}h3{margin:12px 8px}input:not([type]),input[type=text]{text-align:right}input[type=button]{width:100%}table input{font-size:18px;padding:4px;box-sizing:border-box}table tr td{padding:4px}.tvm table input{width:160px}.eff table input{width:110px}.tvm_formula{width:400px;margin:20px}.github{height:50px;margin:0 0 20px 20px}#btn_cy{color:#000}</style>